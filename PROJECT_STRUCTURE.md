# ğŸ“‚ BITS-DOWNLOADER Project Structure

Complete overview of the project organization.

---

## ğŸ—‚ï¸ Directory Layout

```
bits-downloader/
â”‚
â”œâ”€â”€ ğŸ“ bin/                          # Main Executable Scripts
â”‚   â”œâ”€â”€ bits-downloader.sh           # Main TUI application (entry point)
â”‚   â”œâ”€â”€ start_torrents.sh            # Start the torrent manager daemon
â”‚   â”œâ”€â”€ stop_torrents.sh             # Stop the torrent manager daemon
â”‚   â”œâ”€â”€ monitor_torrents.sh          # Real-time torrent monitor
â”‚   â””â”€â”€ torrent_control.sh           # Interactive control panel
â”‚
â”œâ”€â”€ ğŸ“ lib/                          # Library/Helper Scripts
â”‚   â”œâ”€â”€ torrent_manager.sh           # Core torrent management daemon
â”‚   â””â”€â”€ install_torrents_manager.sh  # Legacy installer
â”‚
â”œâ”€â”€ ğŸ“ ui/                           # User Interface Scripts
â”‚   â”œâ”€â”€ terminal_dashboard.sh        # Full-screen responsive dashboard
â”‚   â””â”€â”€ demo_responsive.sh           # Animated demo showcase
â”‚
â”œâ”€â”€ ğŸ“ docs/                         # Documentation
â”‚   â”œâ”€â”€ README.md                    # Legacy documentation
â”‚   â”œâ”€â”€ CHANGELOG.md                 # Version history
â”‚   â”œâ”€â”€ QUICKSTART.md                # Quick start guide
â”‚   â””â”€â”€ torrent_guide.md             # Torrent usage guide
â”‚
â”œâ”€â”€ ğŸ“ data/                         # Data Files
â”‚   â”œâ”€â”€ torrent_list.txt             # Queue of torrents to download
â”‚   â””â”€â”€ torrent_list.txt.example     # Example torrent list
â”‚
â”œâ”€â”€ ğŸ“ downloads/                    # Downloaded Files (user data)
â”‚   â”œâ”€â”€ .incomplete/                 # Incomplete downloads
â”‚   â””â”€â”€ .gitkeep                     # Keep directory in git
â”‚
â”œâ”€â”€ ğŸ“ torrents/                     # Torrent Files
â”‚   â”œâ”€â”€ added/                       # Processed torrent files
â”‚   â””â”€â”€ .gitkeep                     # Keep directory in git
â”‚
â”œâ”€â”€ ğŸ“ logs/                         # Application Logs
â”‚   â”œâ”€â”€ torrent_manager.log          # Main manager log
â”‚   â”œâ”€â”€ transmission.log             # Transmission daemon log
â”‚   â”œâ”€â”€ completed.log                # Completed downloads log
â”‚   â”œâ”€â”€ current_status.txt           # Current status snapshot
â”‚   â”œâ”€â”€ nohup.log                    # Background process log
â”‚   â””â”€â”€ .gitkeep                     # Keep directory in git
â”‚
â”œâ”€â”€ ğŸ“„ bits                          # Quick launcher (./bits)
â”œâ”€â”€ ğŸ“„ install.sh                    # One-line installer script
â”œâ”€â”€ ğŸ“„ README.md                     # Main documentation
â”œâ”€â”€ ğŸ“„ GETTING_STARTED.md            # Getting started guide
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md          # This file
â”‚
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git ignore rules
â”œâ”€â”€ ğŸ“„ .config                       # User configuration (generated)
â””â”€â”€ ğŸ“„ .installed                    # Installation marker (generated)
```

---

## ğŸ¯ Script Purposes

### Main Scripts (bin/)

| Script | Purpose | Usage |
|--------|---------|-------|
| `bits-downloader.sh` | Main TUI application | Entry point with menu system |
| `start_torrents.sh` | Start services | Launch torrent manager daemon |
| `stop_torrents.sh` | Stop services | Cleanly stop all services |
| `monitor_torrents.sh` | Monitor view | Real-time download monitoring |
| `torrent_control.sh` | Control panel | Interactive torrent management |

### Library Scripts (lib/)

| Script | Purpose | When Used |
|--------|---------|-----------|
| `torrent_manager.sh` | Core daemon | Auto-generated by setup wizard |
| `install_torrents_manager.sh` | Legacy installer | Backward compatibility |

### UI Scripts (ui/)

| Script | Purpose | Features |
|--------|---------|----------|
| `terminal_dashboard.sh` | Production dashboard | Real-time stats, responsive |
| `demo_responsive.sh` | Demo showcase | Animations, effects, showcase |

---

## ğŸ“ Configuration Files

### User Configuration (`.config`)

Generated during first run, contains:
- Download directory path
- Torrent directory path
- Log directory path
- Torrent list file path

Example:
```bash
TORRENT_DIR="/path/to/bits-downloader/torrents"
DOWNLOAD_DIR="/path/to/bits-downloader/downloads"
LOG_DIR="/path/to/bits-downloader/logs"
TORRENT_LIST="/path/to/bits-downloader/data/torrent_list.txt"
```

### Installation Marker (`.installed`)

Simple flag file created after successful installation.

---

## ğŸ”„ Data Flow

### Startup Sequence

```
User runs: ./bits
    â†“
bits-downloader.sh checks .installed
    â†“
If not installed â†’ Run installation wizard
    â†“
If installed â†’ Show main menu
    â†“
User selects "Start Torrent Manager"
    â†“
start_torrents.sh launches â†’ lib/torrent_manager.sh
    â†“
torrent_manager.sh starts transmission-daemon
    â†“
Reads data/torrent_list.txt
    â†“
Adds torrents to transmission
    â†“
Downloads to downloads/ directory
    â†“
Logs to logs/ directory
```

### Download Process

```
Torrent added (via menu, file, or list)
    â†“
transmission-daemon receives torrent
    â†“
Downloads to downloads/.incomplete/
    â†“
On completion â†’ Moves to downloads/
    â†“
Logged to logs/completed.log
    â†“
.torrent file moved to torrents/added/
```

---

## ğŸŒ Installation Methods

### 1. One-Line Install

```bash
curl -fsSL https://raw.githubusercontent.com/bimmercodes/bits-downloader/main/install.sh | bash
```

**What it does:**
1. Checks requirements (git, curl)
2. Clones repository to `~/bits-downloader`
3. Installs transmission-daemon
4. Sets up directories
5. Makes scripts executable
6. Creates launcher at `~/bits`

### 2. Manual Clone

```bash
git clone https://github.com/bimmercodes/bits-downloader.git
cd bits-downloader
./bin/bits-downloader.sh
```

**What happens:**
1. Repository cloned
2. First run triggers setup wizard
3. User configures directories
4. Scripts auto-generated
5. Ready to use

---

## ğŸ” File Permissions

### Executable Scripts
All scripts in `bin/`, `lib/`, and `ui/` should be executable:
```bash
chmod +x bin/*.sh lib/*.sh ui/*.sh
chmod +x bits install.sh
```

### Data Directories
Write permissions for:
- `downloads/` - Downloaded files
- `logs/` - Log files
- `torrents/` - Torrent files

---

## ğŸ“¦ Git Structure

### Tracked Files
- All scripts (`bin/`, `lib/`, `ui/`)
- Documentation (`docs/`, `*.md`)
- Example files (`data/*.example`)
- Keep files (`.gitkeep`)
- Configuration templates

### Ignored Files (`.gitignore`)
- User configuration (`.config`, `.installed`)
- Download content (`downloads/*`)
- Log files (`logs/*`)
- User torrents (`torrents/*`)
- Temporary files (`*.swp`, `*.pid`)
- User data (`data/torrent_list.txt`)

---

## ğŸš€ Quick Access

### From Project Root

```bash
# Launch main app
./bits

# Direct script access
./bin/bits-downloader.sh
./bin/start_torrents.sh
./ui/terminal_dashboard.sh
```

### From Anywhere (after install.sh)

```bash
# Using launcher
~/bits

# Using full path
~/bits-downloader/bin/bits-downloader.sh
```

---

## ğŸ”§ Path Resolution

All scripts use dynamic path resolution:

```bash
# Example from bin/bits-downloader.sh
BIN_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$BIN_DIR/.." && pwd)"
```

This ensures scripts work from:
- Any directory
- Symlinks
- Different installations

---

## ğŸ“Š Dependencies

### Required
- `bash` >= 5.0
- `transmission-daemon`
- `transmission-cli`
- Standard Unix tools (`grep`, `sed`, `awk`, etc.)

### Optional
- `bc` - For wave animations in demo
- `tput` - For terminal control (usually included)
- `curl` or `wget` - For remote installs

---

## ğŸ¨ Features by Component

### bin/bits-downloader.sh
- BMW-themed splash screen
- Installation wizard
- Main menu navigation
- Service management
- Configuration management

### ui/terminal_dashboard.sh
- Full-screen responsive layout
- Real-time torrent stats
- System monitoring
- Keyboard controls
- Auto-resize handling

### ui/demo_responsive.sh
- 256-color support
- Smooth animations (~20 FPS)
- Responsive grid layout
- Wave patterns
- Rainbow effects

---

## ğŸ—ºï¸ Migration from Old Structure

### Before
```
bits-downloader/
â”œâ”€â”€ bits-downloader.sh
â”œâ”€â”€ start_torrents.sh
â”œâ”€â”€ monitor_torrents.sh
â”œâ”€â”€ torrent_manager.sh
â””â”€â”€ README.md
```

### After
```
bits-downloader/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ bits-downloader.sh
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ torrent_manager.sh
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ terminal_dashboard.sh
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ README.md
â””â”€â”€ bits (launcher)
```

All internal references updated to new paths!

---

**Last Updated**: 2025-11-15
**Version**: 2.0.0 (Refactored Structure)
**Author**: bimmercodes
